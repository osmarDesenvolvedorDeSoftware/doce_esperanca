<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% set meta = seo if seo is defined and seo else {} %}
    {% set captured_title %}{% block title %}Doce Esperança{% endblock %}{% endset %}
    {% set page_title = meta.title or captured_title.strip() or site_identity %}
    {% set meta_description = meta.description or site_tagline %}
    {% set meta_keywords = meta.keywords or site_keywords %}
    {% set canonical_url = meta.canonical or request.url %}
    {% set og_url = meta.og_url or canonical_url %}
    {% set og_type = meta.og_type or 'website' %}
    {% set og_title = meta.og_title or page_title %}
    {% set og_description = meta.og_description or meta_description %}
    {% set og_image = meta.og_image or default_share_image %}
    {% set twitter_card = meta.twitter_card or 'summary_large_image' %}
    {% set twitter_title = meta.twitter_title or og_title %}
    {% set twitter_description = meta.twitter_description or og_description %}
    {% set twitter_image = meta.twitter_image or og_image %}
    <title>{{ page_title }}</title>
    <meta name="description" content="{{ meta_description }}">
    {% if meta_keywords %}<meta name="keywords" content="{{ meta_keywords }}">{% endif %}
    <meta name="robots" content="{% if meta.noindex %}noindex, nofollow{% else %}index, follow{% endif %}">
    <meta name="author" content="{{ site_identity }}">
    <meta name="theme-color" content="#198754">
    <link rel="canonical" href="{{ canonical_url }}">
    <link rel="alternate" hreflang="pt-BR" href="{{ canonical_url }}">
    <meta property="og:site_name" content="{{ site_identity }}">
    <meta property="og:title" content="{{ og_title }}">
    <meta property="og:description" content="{{ og_description }}">
    <meta property="og:type" content="{{ og_type }}">
    <meta property="og:url" content="{{ og_url }}">
    <meta property="og:locale" content="pt_BR">
    {% if og_image %}<meta property="og:image" content="{{ og_image }}">{% endif %}
    <meta name="twitter:card" content="{{ twitter_card }}">
    <meta name="twitter:title" content="{{ twitter_title }}">
    <meta name="twitter:description" content="{{ twitter_description }}">
    {% if twitter_image %}<meta name="twitter:image" content="{{ twitter_image }}">{% endif %}
    {% block extra_meta %}{% endblock %}
    <link rel="shortcut icon" href="{{ static_url('img/logo.ico') }}" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="{{ static_url('css/ong.style.css') }}">
    {% if organization_schema %}
      <script type="application/ld+json">{{ organization_schema | tojson(indent=2) }}</script>
    {% endif %}
    {% if meta.structured_data %}
      {% if meta.structured_data is mapping %}
        <script type="application/ld+json">{{ meta.structured_data | tojson(indent=2) }}</script>
      {% else %}
        {% for schema in meta.structured_data %}
          {% if schema %}
            <script type="application/ld+json">{{ schema | tojson(indent=2) }}</script>
          {% endif %}
        {% endfor %}
      {% endif %}
    {% endif %}
  </head>
  <body class="d-flex flex-column min-vh-100">
    <a href="#conteudo-principal" class="skip-link">Pular para o conteúdo principal</a>
    <header>
      <nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm fixed-top" aria-label="Navegação principal">
        <div class="container-wide">
          <a class="navbar-brand d-flex align-items-center" href="{{ url_for('public.index') }}">
            <img src="{{ static_url('img/logo.ico') }}" alt="Logo Doce Esperança" class="me-2">
            <span class="brand-name">{{ site_identity or 'Doce Esperança' }}</span>
          </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMain" aria-controls="navbarMain" aria-expanded="false" aria-label="Alternar navegação">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarMain">
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
              <li class="nav-item"><a class="nav-link {% if active_page == 'inicio' %}active{% endif %}" href="{{ url_for('public.index') }}" {% if active_page == 'inicio' %}aria-current="page"{% endif %}>Início</a></li>
              <li class="nav-item"><a class="nav-link {% if active_page == 'sobre' %}active{% endif %}" href="{{ url_for('public.sobre') }}" {% if active_page == 'sobre' %}aria-current="page"{% endif %}>Sobre</a></li>
              <li class="nav-item"><a class="nav-link {% if active_page == 'projetos' %}active{% endif %}" href="{{ url_for('public.projetos') }}" {% if active_page == 'projetos' %}aria-current="page"{% endif %}>Projetos</a></li>
              <li class="nav-item"><a class="nav-link {% if active_page == 'galeria' %}active{% endif %}" href="{{ url_for('public.galeria') }}" {% if active_page == 'galeria' %}aria-current="page"{% endif %}>Galeria</a></li>
              <li class="nav-item"><a class="nav-link {% if active_page == 'depoimentos' %}active{% endif %}" href="{{ url_for('public.depoimentos') }}" {% if active_page == 'depoimentos' %}aria-current="page"{% endif %}>Depoimentos</a></li>
              <li class="nav-item"><a class="nav-link {% if active_page == 'transparencia' %}active{% endif %}" href="{{ url_for('public.transparencia') }}" {% if active_page == 'transparencia' %}aria-current="page"{% endif %}>Portal da Transparência</a></li>
              <li class="nav-item"><a class="nav-link {% if active_page == 'doacao' %}active{% endif %}" href="{{ url_for('public.doacao') }}" {% if active_page == 'doacao' %}aria-current="page"{% endif %}>Doações</a></li>
              <li class="nav-item"><a class="nav-link {% if active_page == 'loja' %}active{% endif %}" href="{{ url_for('public.loja') }}" {% if active_page == 'loja' %}aria-current="page"{% endif %}>Loja Solidária</a></li>
              <li class="nav-item"><a class="nav-link {% if active_page == 'contato' %}active{% endif %}" href="{{ url_for('public.contato') }}" {% if active_page == 'contato' %}aria-current="page"{% endif %}>Contato</a></li>
            </ul>
          </div>
        </div>
      </nav>
    </header>
    <main id="conteudo-principal" class="flex-grow-1 pt-5 mt-5" role="main">
      <div class="container-wide pt-4">
        {% with messages = get_flashed_messages(with_categories=True) %}
          {% if messages %}
            {% for category, message in messages %}
              <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Fechar"></button>
              </div>
            {% endfor %}
          {% endif %}
        {% endwith %}
      </div>
      <section class="section-spacious">
        {% block content %}{% endblock %}
      </section>
    </main>
    <footer class="mt-auto text-light">
      <div class="footer-top py-5">
        <div class="container-wide">
          <div class="row gy-4">
            <section class="col-md-4" aria-label="Informações da associação">
              <div class="d-flex align-items-center mb-3">
                <img src="{{ static_url('img/logo.ico') }}" alt="Logo Doce Esperança" class="me-2 footer-logo">
                <div>
                  <h5 class="mb-1">{{ (footer_contact.titulo if footer_contact else None) or 'Doce Esperança' }}</h5>
                  <p class="mb-0 small">{{ footer_contact_data.support_text }}</p>
                </div>
              </div>
              <address class="mb-0 small" aria-label="Endereço da associação">
                {% if footer_contact_data.address %}
                  {% for line in footer_contact_data.address.splitlines() %}
                    {{ line }}<br>
                  {% endfor %}
                {% else %}
                  Rua Solidária, 123<br>
                  Bairro Esperança, Recife - PE<br>
                {% endif %}
                <a class="footer-link" href="mailto:{{ (footer_contact.resumo if footer_contact else None) or 'contato@doceesperanca.org' }}">{{ (footer_contact.resumo if footer_contact else None) or 'contato@doceesperanca.org' }}</a><br>
                {% if footer_contact_phone_href %}
                  <a class="footer-link" href="tel:{{ footer_contact_phone_href }}">{{ footer_contact_data.phone }}</a>
                {% else %}
                  <span class="footer-link text-decoration-none text-body">{{ footer_contact_data.phone }}</span>
                {% endif %}
              </address>
            </section>
            <nav class="col-md-4" aria-label="Links rápidos">
              <h6 class="text-uppercase fw-bold mb-3">Links Rápidos</h6>
              <ul class="list-unstyled footer-links">
                <li><a href="{{ url_for('public.index') }}">Início</a></li>
                <li><a href="{{ url_for('public.sobre') }}">Sobre</a></li>
                <li><a href="{{ url_for('public.projetos') }}">Projetos</a></li>
                <li><a href="{{ url_for('public.galeria') }}">Galeria</a></li>
                <li><a href="{{ url_for('public.depoimentos') }}">Depoimentos</a></li>
                <li><a href="{{ url_for('public.transparencia') }}">Portal da Transparência</a></li>
                <li><a href="{{ url_for('public.doacao') }}">Doações</a></li>
                <li><a href="{{ url_for('public.loja') }}">Loja Solidária</a></li>
                <li><a href="{{ url_for('public.contato') }}">Contato</a></li>
              </ul>
            </nav>
            <section class="col-md-4" aria-label="Redes sociais">
              <h6 class="text-uppercase fw-bold mb-3">Redes Sociais</h6>
              <p class="small mb-3">Siga o nosso trabalho e compartilhe esperança.</p>
              <div class="d-flex gap-3">
                {% if footer_contact_data.facebook %}
                  <a class="social-icon" href="{{ footer_contact_data.facebook }}" target="_blank" rel="noopener" aria-label="Facebook da Associação Doce Esperança"><i class="bi bi-facebook" aria-hidden="true"></i></a>
                {% endif %}
                {% if footer_contact_data.instagram %}
                  <a class="social-icon" href="{{ footer_contact_data.instagram }}" target="_blank" rel="noopener" aria-label="Instagram da Associação Doce Esperança"><i class="bi bi-instagram" aria-hidden="true"></i></a>
                {% endif %}
                {% if footer_contact_data.youtube %}
                  <a class="social-icon" href="{{ footer_contact_data.youtube }}" target="_blank" rel="noopener" aria-label="YouTube da Associação Doce Esperança"><i class="bi bi-youtube" aria-hidden="true"></i></a>
                {% endif %}
                {% if footer_contact_data.whatsapp %}
                  <a class="social-icon" href="{{ footer_contact_data.whatsapp }}" target="_blank" rel="noopener" aria-label="WhatsApp da Associação Doce Esperança"><i class="bi bi-whatsapp" aria-hidden="true"></i></a>
                {% endif %}
              </div>
            </section>
          </div>
        </div>
      </div>
      <div class="footer-bottom text-center">
        <div class="container-wide">
          <p class="footer-institutional-text mb-0">
            © 2025 <strong>Associação Doce Esperança</strong> — desenvolvido com carinho por
            <a class="footer-dev-link" href="https://github.com/osmarDesenvolvedorDeSoftware" target="_blank" rel="noopener">
              <strong>Osmar F. Cavalcante</strong>
            </a>, em apoio à causa solidária.
          </p>
        </div>
      </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
</html>
