{% extends "public/base.html" %}

{% block title %}Início - Doce Esperança{% endblock %}

{% set texto_inicio = textos.get('inicio') %}
{% set texto_missao = textos.get('missao') %}
{% set texto_principios = textos.get('principios') %}

{% block header_image %}
  {% set imagem_inicio = texto_inicio.imagem_path if texto_inicio else None %}
  <img src="{{ url_for('static', filename=imagem_inicio or 'img/Todos.jpg') }}" alt="{{ texto_inicio.titulo or content_placeholder }}">
{% endblock %}

{% block content %}
  <section class="banner-destaque">
    {% if banners %}
      {% for banner in banners %}
        <figure>
          <img src="{{ url_for('static', filename=banner.imagem_path) }}" alt="{{ banner.titulo or content_placeholder }}">
          {% if banner.titulo or banner.descricao %}
            <figcaption>
              {% if banner.titulo %}<h3>{{ banner.titulo }}</h3>{% endif %}
              {% if banner.descricao %}<p>{{ banner.descricao }}</p>{% endif %}
            </figcaption>
          {% endif %}
        </figure>
      {% endfor %}
    {% else %}
      <p class="texto-placeholder">{{ content_placeholder }}</p>
    {% endif %}
  </section>
  <section>
    <h2>{{ texto_inicio.titulo or content_placeholder }}</h2>
    {% if texto_inicio and texto_inicio.conteudo %}
      {{ texto_inicio.conteudo | safe }}
    {% else %}
      <p>{{ content_placeholder }}</p>
    {% endif %}
  </section>

  <section>
    <h3>{{ texto_missao.titulo or content_placeholder }}</h3>
    {% if texto_missao and texto_missao.conteudo %}
      {{ texto_missao.conteudo | safe }}
    {% else %}
      <p>{{ content_placeholder }}</p>
    {% endif %}
  </section>

  <section>
    <h3>{{ texto_principios.titulo or (institutional_sections['principios']['label'] if 'principios' in institutional_sections else content_placeholder) }}</h3>
    {% if texto_principios and texto_principios.conteudo %}
      {{ texto_principios.conteudo | safe }}
    {% else %}
      <p>{{ content_placeholder }}</p>
    {% endif %}
  </section>

  <section>
    <h3>Parceiros</h3>
    {% if parceiros %}
      <ul class="parceiros">
        {% for parceiro in parceiros %}
          <li>
            {% if parceiro.logo_path %}
              <img src="{{ url_for('static', filename=parceiro.logo_path) }}" alt="{{ parceiro.nome }}" width="160">
            {% endif %}
            <h4>{{ parceiro.nome }}</h4>
            {% if parceiro.descricao %}
              <p>{{ parceiro.descricao }}</p>
            {% endif %}
            {% if parceiro.website %}
              <a href="{{ parceiro.website }}" target="_blank" rel="noopener">{{ parceiro.website }}</a>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="texto-placeholder">
        {{ (parceiros_placeholder.conteudo if parceiros_placeholder and parceiros_placeholder.conteudo else content_placeholder) | safe }}
      </p>
    {% endif %}
  </section>
{% endblock %}
